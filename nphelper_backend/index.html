<!DOCTYPE html>
<html lang="en">
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  </head>

  <body>
    <input type="text" id="fname" name="fname" placeholder="fullname" />
    <input type="text" id="country" name="country" placeholder="country" />
    <input type="button" id="add_button" value="Submit" />
    <div id="response"></div>

    <script>
      const token = '5529562141:AAHUzelAYk4E4g85I59jatpSvqchyad2jzM';
      const chatId = '933184012';

      $(document).ready(function () {
        $('#add_button').on('click', function (event) {
          execute();
        });

        function execute() {
          const fname = document.querySelector('#fname').value;
          const country = document.querySelector('#country').value;
          const message = `Fullname: ${fname}\nCountry: ${country}`;

          $.ajax({
            type: 'POST',
            url: `https://api.telegram.org/bot${token}/sendMessage`,
            data: {
              chat_id: chatId,
              text: message,
              parse_mode: 'html',
            },
            success: function (res) {
              console.debug(res);
              $('#response').text('Message sent');
            },
            error: function (error) {
              console.error(error);
              alert('error failed');
            },
          });
        }
      });
    </script>
  </body>
</html>
